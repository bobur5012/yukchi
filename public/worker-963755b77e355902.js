(()=>{let t=self;t.addEventListener("push",i=>{if(!i.data)return;let n={};try{n=i.data.json()}catch{n={body:i.data.text()}}let o=n.title??"Yukchi",e=n.body??"",a=n.data?.url??"/";i.waitUntil(t.registration.showNotification(o,{body:e,data:{url:a},icon:"/icon.ico",badge:"/icon.ico"}))}),t.addEventListener("notificationclick",i=>{i.notification.close();let n=new URL(i.notification.data?.url??"/",t.location.origin).href;i.waitUntil(t.clients.matchAll({type:"window",includeUncontrolled:!0}).then(i=>{for(let o of i)if(o.url.startsWith(t.location.origin)&&"focus"in o){if("navigate"in o&&"function"==typeof o.navigate)return o.navigate(n).then(()=>o.focus());return o.focus()}return t.clients.openWindow?t.clients.openWindow(n):void 0}))})})();